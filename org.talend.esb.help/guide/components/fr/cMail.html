<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>cMail</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-esb-mediationcomponents-rg-fr..html" title="Composants Mediation Talend Open Studio for ESB"><link rel="up" href="ch-messaging.html" title="Chapitre&nbsp;3.&nbsp;Composants Messaging"><link rel="prev" href="cJMS.html" title="cJMS"><link rel="next" href="cMessagingEndpoint.html" title="cMessagingEndpoint"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">cMail</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="cJMS.html">Pr&eacute;c&eacute;dent</a>&nbsp;</td><th width="60%" align="center">Chapitre&nbsp;3.&nbsp;Composants Messaging</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="cMessagingEndpoint.html">Suivant</a></td></tr></table><hr></div><div lang="fr" class="section" title="cMail"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="cMail"></a>cMail</h2></div></div></div><div class="mediaobject"><img src="../images/cmail_icon32_white.png"></div><div class="section" title="Propri&eacute;t&eacute;s du cMail"><div class="titlepage"><div><div><h3 class="title"><a name="d2665e7212"></a>Propri&eacute;t&eacute;s du cMail</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Famille de composant</strong></span></p>
                        </td><td valign="top">
                            <p>Messaging </p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Fonction</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Le composant <span class="emphasis"><strong>cMail</strong></span> est cr&eacute;&eacute; pour
                                envoyer ou recevoir des e-mails.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Objectif</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Envoie ou re&ccedil;oit des e-mails dans une route.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Protocols</em></span></p>
                        </td><td valign="top">
                            <p>Liste des protocoles d'envoi ou de r&eacute;ception d'e-mails.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Host</em></span></p>
                        </td><td valign="top">
                            <p>Nom de l'h&ocirc;te du serveur d'e-mail.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Port</em></span></p>
                        </td><td valign="top">
                            <p>Num&eacute;ro de port du serveur d'e-mail.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>UserName</em></span> et
                                <span class="emphasis"><em>Password</em></span></p>
                        </td><td valign="top">
                            <p>Informations d'authentification, respectivement l'identifiant et
                                le mot de passe.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Subject</em></span></p>
                        </td><td valign="top">
                            <p>Sujet du mail &agrave; envoyer.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Content Type</em></span></p>
                        </td><td valign="top">
                            <p>Type de contenu de l'e-mail.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>From</em></span></p>
                        </td><td valign="top">
                            <p>&Eacute;metteur de l'e-mail.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>To </em></span></p>
                        </td><td valign="top">
                            <p>Destinataire(s) de l'e-mail.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>CC</em></span></p>
                        </td><td valign="top">
                            <p>Les destinataires en CC de l'e-mail. Vous pouvez saisir
                                diff&eacute;rentes adresses e-mail en les s&eacute;parant par une virgule.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>BCC</em></span></p>
                        </td><td valign="top">
                            <p>Les destinataires en CCI de l'e-mail. Vous pouvez saisir
                                diff&eacute;rentes adresses e-mail en les s&eacute;parant par une virgule.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Arguments</em></span></p>
                        </td><td valign="top">
                            <p>Cliquez sur le bouton <span class="emphasis"><strong>[+]</strong></span> pour
                                ajouter les lignes n&eacute;cessaires &agrave; la table <span class="emphasis"><strong>Arguments</strong></span>. Saisissez le nom et la valeur d'un
                                argument pour chaque ligne ajout&eacute;e.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Utilisation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Lorsqu'il est utilis&eacute; comme composant de d&eacute;but, le <span class="emphasis"><strong>cMail</strong></span> est con&ccedil;u pour recevoir des
                                e-mails. Sinon, il est con&ccedil;u pour en envoyer.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Sc&eacute;nario : Utiliser un composant cMail pour envoyer et recevoir des e-mails"><div class="titlepage"><div><div><h3 class="title"><a name="d2665e7486"></a>Sc&eacute;nario : Utiliser un composant cMail pour envoyer et recevoir des e-mails</h3></div></div></div><p>Ce sc&eacute;nario comprend deux routes. La premi&egrave;re envoie un e-mail et la seconde le
            re&ccedil;oit.</p><p>Construisez la route pour envoyer l'e-mail.</p><div class="procedure" title="Proc&eacute;dure&nbsp;3.16.&nbsp;Envoyer un e-mail"><a name="d2665e7493"></a><p class="title"><b>Proc&eacute;dure&nbsp;3.16.&nbsp;Envoyer un e-mail </b></p><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>D&eacute;posez les composants suivants de la <span class="emphasis"><strong>Palette</strong></span>
                    dans l'espace de mod&eacute;lisation graphique : un <span class="emphasis"><strong>cFile</strong></span>, un <span class="emphasis"><strong>cMail</strong></span> et un <span class="emphasis"><strong>cProcessor</strong></span>, respectivement nomm&eacute;s <span class="emphasis"><strong>Mail_to_send</strong></span>, <span class="emphasis"><strong>Send_Mail</strong></span> et <span class="emphasis"><strong>Mail_Sent</strong></span>. </p></li><li class="step" title="&Eacute;tape 2"><p>Reliez les composants &agrave; l'aide de liens <span class="emphasis"><strong>Row</strong></span> &gt;
                        <span class="emphasis"><strong>Route</strong></span>.</p><div class="mediaobject"><img src="../images/use_case_cmail_1.png"></div></li><li class="step" title="&Eacute;tape 3"><p>Double-cliquez sur le <span class="emphasis"><strong>cFile</strong></span> pour ouvrir sa
                    vue <span class="emphasis"><strong>Basic settings</strong></span>. </p><div class="mediaobject"><img src="../images/use_case_cmail_2.png"></div></li><li class="step" title="&Eacute;tape 4"><p>Cliquez sur le bouton <span class="emphasis"><strong>[...]</strong></span> &agrave; c&ocirc;t&eacute; du champ
                        <span class="emphasis"><strong>Path</strong></span> afin de s&eacute;lectionner dans votre
                    syst&egrave;me le dossier contenant le fichier &agrave; envoyer. </p></li><li class="step" title="&Eacute;tape 5"><p>Dans le champ <span class="emphasis"><strong>FileName</strong></span>, saisissez le nom du
                    fichier &agrave; envoyer, <span class="emphasis"><em>test mail.txt</em></span> dans cet
                    exemple. Laissez les autres param&egrave;tres tels qu'ils sont.</p><p>Le contenu de ce fichier est <span class="emphasis"><em>test mail
                    body</em></span>.</p></li><li class="step" title="&Eacute;tape 6"><p>Double-cliquez sur le <span class="emphasis"><strong>cMail</strong></span> afin d'ouvrir sa
                    vue <span class="emphasis"><strong>Basic settings</strong></span>. </p><div class="mediaobject"><img src="../images/use_case_cmail_3.png"></div></li><li class="step" title="&Eacute;tape 7"><p>Dans la liste <span class="emphasis"><strong>Protocols</strong></span>, s&eacute;lectionnez
                        <span class="emphasis"><em>smtps</em></span>.</p><p>Dans le champ <span class="emphasis"><strong>Host</strong></span>, saisissez le nom de
                    l'h&ocirc;te du serveur SMTP, <span class="emphasis"><em>smtp.gmail.com</em></span> dans
                    ce sc&eacute;nario.</p><p>Dans les champs <span class="emphasis"><strong>UserName</strong></span> et <span class="emphasis"><strong>Password</strong></span>, saisissez les informations
                    d'authentification, sous forme de variables de contexte dans cet exemple. Pour
                    plus d'informations concernant la configuration des variables de contexte,
                    consultez le <span class="emphasis"><em>Guide utilisateur de</em></span>
                    <span class="emphasis"><em>Talend Open Studio for ESB</em></span>.</p><p>Laissez le champ <span class="emphasis"><strong>ContentType</strong></span> par d&eacute;faut,
                    c'est-&agrave;-dire <span class="emphasis"><em>text/plain</em></span>.</p><p>Dans le champ <span class="emphasis"><strong>To</strong></span>, saisissez l'adresse e-mail
                    du destinataire. Dans ce sc&eacute;nario, saisissez la variable de contexte
                    correspondante.</p></li><li class="step" title="&Eacute;tape 8"><p>Double-cliquez sur le <span class="emphasis"><strong>cProcessor</strong></span> pour ouvrir
                    sa vue <span class="emphasis"><strong>Basic settings</strong></span>.</p><div class="mediaobject" align="center"><img src="../images/use_case_cmail_4.png" align="middle"></div></li><li class="step" title="&Eacute;tape 9"><p>Dans le champ <span class="emphasis"><strong>Code</strong></span>, saisissez le code
                    ci-dessous afin d'afficher une fen&ecirc;tre pop-up lorsque l'e-mail est
                    envoy&eacute;.</p><p>
                    </p><pre class="programlisting">System.out.println("Mail sent");</pre><p>
                </p></li><li class="step" title="&Eacute;tape 10"><p>Sauvegardez votre route et appuyez sur <span class="emphasis"><strong>F6</strong></span>
                    pour l'ex&eacute;cuter.</p><div class="mediaobject" align="center"><img src="../images/use_case_cmail_5.png" align="middle"></div></li></ol></div><p>Comme affich&eacute; ci-dessus, l'e-mail a bien &eacute;t&eacute; envoy&eacute;.</p><p>Construisez la route recevant l'e-mail.</p><div class="procedure" title="Proc&eacute;dure&nbsp;3.17.&nbsp;Recevoir un e-mail"><a name="d2665e7659"></a><p class="title"><b>Proc&eacute;dure&nbsp;3.17.&nbsp;Recevoir un e-mail </b></p><ol class="procedure" type="1"><li class="step" title="&Eacute;tape 1"><p>D&eacute;posez les composants suivants de la <span class="emphasis"><strong>Palette</strong></span>
                    dans l'espace de mod&eacute;lisation graphique : un <span class="emphasis"><strong>cMail</strong></span> et un <span class="emphasis"><strong>cProcessor</strong></span>,
                    respectivement nomm&eacute;s <span class="emphasis"><strong>Receive_Mail</strong></span> et <span class="emphasis"><strong>Mail_Body</strong></span>. </p></li><li class="step" title="&Eacute;tape 2"><p>Reliez les composants &agrave; l'aide d'un lien <span class="emphasis"><strong>Row</strong></span>
                    &gt; <span class="emphasis"><strong>Route</strong></span>.</p><div class="mediaobject"><img src="../images/use_case_cmail_6.png"></div></li><li class="step" title="&Eacute;tape 3"><p>Double-cliquez sur le <span class="emphasis"><strong>cMail</strong></span> afin d'ouvrir sa
                    vue <span class="emphasis"><strong>Basic settings</strong></span>. </p><div class="mediaobject"><img src="../images/use_case_cmail_7.png"></div></li><li class="step" title="&Eacute;tape 4"><p>Dans la liste <span class="emphasis"><strong>Protocols</strong></span>, s&eacute;lectionnez
                        <span class="emphasis"><em>imaps</em></span>.</p></li><li class="step" title="&Eacute;tape 5"><p>Dans le champ <span class="emphasis"><strong>Host</strong></span>, saisissez le nom de
                    l'h&ocirc;te du serveur imap, <span class="emphasis"><em>imap.gmail.com</em></span> dans
                    cet exemple.</p></li><li class="step" title="&Eacute;tape 6"><p>Dans le champ <span class="emphasis"><strong>Port</strong></span>, saisissez le num&eacute;ro du
                    port, <span class="emphasis"><em>993</em></span> dans ce sc&eacute;nario.</p></li><li class="step" title="&Eacute;tape 7"><p>Dans les champs <span class="emphasis"><strong>UserName</strong></span> et <span class="emphasis"><strong>Password</strong></span>, saisissez les informations
                    d'authentification, sous forme de variables de contexte dans cet exemple. Pour
                    plus d'information  concernant la configuration des variables de contexte,
                    consultez le<span class="emphasis"><em> Guide utilisateur de</em></span>
                    <span class="emphasis"><em>Talend Open Studio for ESB</em></span>.</p></li><li class="step" title="&Eacute;tape 8"><p>Laissez le champ <span class="emphasis"><strong>ContentType</strong></span> par d&eacute;faut,
                    c'est-&agrave;-dire <span class="emphasis"><em>text/plain</em></span>.</p></li><li class="step" title="&Eacute;tape 9"><p>Double-cliquez sur le <span class="emphasis"><strong>cProcessor</strong></span> pour ouvrir
                    sa vue <span class="emphasis"><strong>Basic settings</strong></span>. </p><div class="mediaobject"><img src="../images/use_case_cmail_8.png"></div></li><li class="step" title="&Eacute;tape 10"><p>Dans le champ <span class="emphasis"><strong>Code</strong></span>, saisissez le code
                    ci-dessous afin d'afficher le corps du message.</p><p>
                    </p><pre class="programlisting">System.out.println(exchange.getIn().getBody(String.class));</pre><p>
                </p></li><li class="step" title="&Eacute;tape 11"><p>Sauvegardez la route et appuyez sur <span class="emphasis"><strong>F6</strong></span> pour
                    l'ex&eacute;cuter.</p><div class="mediaobject"><img src="../images/use_case_cmail_9.png"></div><p>Comme affich&eacute; ci-dessus, l'e-mail a bien &eacute;t&eacute; re&ccedil;u et son contenu est <span class="emphasis"><em>test mail body</em></span>.</p></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="cJMS.html">Pr&eacute;c&eacute;dent</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-messaging.html">Niveau sup&eacute;rieur</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="cMessagingEndpoint.html">Suivant</a></td></tr><tr><td width="40%" align="left" valign="top">cJMS&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-esb-mediationcomponents-rg-fr..html">Sommaire</a></td><td width="40%" align="right" valign="top">&nbsp;cMessagingEndpoint</td></tr></table></div></body></html>